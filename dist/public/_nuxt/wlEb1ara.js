import{_ as P}from"./B935mvHd.js";import{_ as N}from"./CN_Vb-zk.js";import{_ as V,a as S,d as k}from"./CZoUmSs-.js";import{m as C,az as E,av as z,r as _,c as w,a as l,O as B,b as s,k as o,w as a,V as F,a7 as R,o as g,a6 as $,d as U}from"./Cy3AUEk5.js";import{b as h}from"./BG25auYa.js";import{a as j}from"./BZE5qqnb.js";import"./DhRse6VW.js";import"./COFYxvp7.js";import"./DIVnsOlH.js";const M={class:"my-5"},T={key:0,class:"mb-3"},Q=C({__name:"reset-password",setup(q){const u=E().query.token?.toString(),t=z({password:"",confirmPassword:""});function b(){t.password="",t.confirmPassword=""}const n=_(null),i=_(!1);async function v(d){if(n.value=null,!u){n.value=new Error("Invalid or expired token. Try again later.");return}const{password:e}=d.data;await j.resetPassword({newPassword:e,token:u},{onError(m){n.value=new Error(m.error.message)},onSuccess(){b(),i.value=!0}})}return(d,e)=>{const m=P,c=N,p=S,f=$,x=V,y=h;return g(),w("div",null,[e[5]||(e[5]=l("h1",{class:"text-lg font-semibold"},"Reset Password",-1)),l("div",M,[l("div",null,[o(n)?(g(),w("div",T,[s(m,{message:o(n).message},null,8,["message"])])):B("",!0),s(x,{schema:o(k),state:o(t),class:"space-y-4",onSubmit:F(v,["prevent"])},{default:a(()=>[s(p,{label:"New Password",name:"password"},{default:a(()=>[s(c,{modelValue:o(t).password,"onUpdate:modelValue":e[0]||(e[0]=r=>o(t).password=r),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),s(p,{label:"Confirm New Password",name:"confirmPassword"},{default:a(()=>[s(c,{modelValue:o(t).confirmPassword,"onUpdate:modelValue":e[1]||(e[1]=r=>o(t).confirmPassword=r),size:"lg",class:"w-full"},null,8,["modelValue"])]),_:1}),s(f,{type:"submit",class:"mt-2 w-full flex items-center justify-center",size:"lg",icon:"i-lucide-check-circle","loading-auto":""},{default:a(()=>e[3]||(e[3]=[U(" Submit ",-1)])),_:1,__:[3]})]),_:1},8,["schema","state"]),s(y,{open:o(i),"onUpdate:open":e[2]||(e[2]=r=>R(i)?i.value=r:null),title:"Success",close:!1,dismissible:!1,ui:{footer:"justify-end"}},{body:a(()=>e[4]||(e[4]=[l("div",{class:"space-y-3"},[l("p",null," Your password has been reset successfully! Sign in now to continue. ")],-1)])),footer:a(()=>[s(f,{to:{name:"login"},label:"Sign in","trailing-icon":"lucide-circle-arrow-right"})]),_:1},8,["open"])])])])}}});export{Q as default};
