import{s as N,r as y,cQ as I,cR as O,cS as J,bw as R,g as V,f as T,cT as $,S as B,h as C}from"./Cy3AUEk5.js";function M(e,u,d){const{immediate:w=!0,delay:c=0,onError:v=O,onSuccess:g=O,resetOnExecute:n=!0,shallow:t=!0,throwError:i}=d??{},a=t?N(u):y(u),_=N(!1),m=N(!1),s=N(void 0);async function p(l=0,...f){n&&(a.value=u),s.value=void 0,_.value=!1,m.value=!0,l>0&&await I(l);const o=typeof e=="function"?e(...f):e;try{const r=await o;a.value=r,_.value=!0,g(r)}catch(r){if(s.value=r,v(r),i)throw r}finally{m.value=!1}return a.value}w&&p(c);const h={state:a,isReady:_,isLoading:m,error:s,execute:p,executeImmediate:(...l)=>p(0,...l)};function S(){return new Promise((l,f)=>{J(m).toBe(!1).then(()=>l(h)).catch(f)})}return{...h,then(l,f){return S().then(l,f)}}}function F(e){return JSON.parse(JSON.stringify(e))}const x=new Map;function U(e){const u=C();function d(n){var t;const i=x.get(e)||new Set;i.add(n),x.set(e,i);const a=()=>c(n);return(t=u?.cleanups)==null||t.push(a),a}function w(n){function t(...i){c(t),n(...i)}return d(t)}function c(n){const t=x.get(e);t&&(t.delete(n),t.size||v())}function v(){x.delete(e)}function g(n,t){var i;(i=x.get(e))==null||i.forEach(a=>a(n,t))}return{on:d,once:w,off:c,emit:g,reset:v}}function z(e,u,d,w={}){var c,v,g;const{clone:n=!1,passive:t=!1,eventName:i,deep:a=!1,defaultValue:_,shouldEmit:m}=w,s=R(),p=d||s?.emit||((c=s?.$emit)==null?void 0:c.bind(s))||((g=(v=s?.proxy)==null?void 0:v.$emit)==null?void 0:g.bind(s?.proxy));let h=i;h=h||`update:${u.toString()}`;const S=o=>n?typeof n=="function"?n(o):F(o):o,l=()=>$(e[u])?S(e[u]):_,f=o=>{m?m(o)&&p(h,o):p(h,o)};if(t){const o=l(),r=y(o);let E=!1;return V(()=>e[u],b=>{E||(E=!0,r.value=S(b),B(()=>E=!1))}),V(r,b=>{!E&&(b!==e[u]||a)&&f(b)},{deep:a}),r}else return T({get(){return l()},set(o){f(o)}})}export{z as a,U as b,M as u};
