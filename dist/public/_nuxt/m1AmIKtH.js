import{_ as k}from"./B935mvHd.js";import{m as g,az as b,ap as E,r as w,z as N,aw as $,c as l,a as s,k as t,b as a,O as C,d as V,t as S,w as A,a6 as B,e as R,o as m}from"./Cy3AUEk5.js";import{_ as T}from"./DhRse6VW.js";import{u as z}from"./COFYxvp7.js";import{a as h}from"./BZE5qqnb.js";function D(n,u=5){if(!n)return"";const[i,r]=n.split("@");return!i||!r?n:`${i.slice(0,3)}${"*".repeat(u)}@${r}`}const L={class:"my-5"},M={key:0},Y={key:1},j={key:0,class:"flex items-center gap-1 flex-wrap"},q={class:"mt-4 flex items-center gap-3 justify-between"},G=g({__name:"email-verification",setup(n){const u=b(),i=E(),r=u.query.email?.toString(),o=w(atob(r??"")),{state:c,executeImmediate:d}=z(async function(){return await h.sendVerificationEmail({email:o.value,callbackURL:"/token-validation"},{onSuccess:()=>{i.add({color:"success",title:"Success",description:"Email sent successfully"})}})},null);return N(()=>{if(!o.value)throw $({statusCode:400,statusMessage:"We could not verifiy your email due to incomplete data. Try signing up again.",fatal:!0})}),(f,e)=>{const _=k,p=B,v=R,y=T;return m(),l("div",null,[e[4]||(e[4]=s("h1",{class:"text-lg font-semibold"},"Verify Your Email",-1)),e[5]||(e[5]=s("div",{class:"text-sm text-muted"},"You must verify your email address",-1)),s("div",L,[t(c)?.error?(m(),l("div",M,[a(_,{message:t(c)?.error?.message??t(c)?.error?.statusText,"show-retry":"",onRetry:e[0]||(e[0]=x=>t(d)())},null,8,["message"])])):(m(),l("div",Y,[s("div",null,[t(o)?(m(),l("p",j,[e[2]||(e[2]=V(" Email: ",-1)),s("b",null,S(("maskEmail"in f?f.maskEmail:t(D))(t(o))),1),a(v,{to:{name:"login"}},{default:A(()=>[a(p,{color:"warning",icon:"i-lucide-circle-alert",label:"Not my email",size:"sm",variant:"link",class:"ml-1"})]),_:1})])):C("",!0),a(y,{variant:"subtle",description:`A verification link has been sent to your email. Click on it to
              verify your account.`,icon:"lucide-circle-alert",class:"mt-4"})]),s("div",q,[e[3]||(e[3]=s("p",{class:"text-muted text-sm"},"Didn't receive the email?",-1)),a(p,{"loading-auto":"",label:"Resend",onClick:e[1]||(e[1]=x=>t(d)())})])]))])])}}});export{G as default};
